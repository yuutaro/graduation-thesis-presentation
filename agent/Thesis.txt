\title{一点物作品を対象とした売買プラットフォームの開発と LLM を用いた疑似ユーザーデータの作成による評価}

\jasummary{  }{--- 副題（必要であれば記入）}
近年，クリエイターエコノミーの急速な拡大に伴い，個人が創作物を発信・販売する機会は飛躍的に増大している．しかし，既存のCtoCプラットフォームの多くは既製品や大量生産品の流通に最適化されており，一点物の作品が持つ固有の文脈（ナラティブ）の保存や，希少性に応じた適切な価格決定，および取引の信頼性担保において課題を抱えている．特に，物理的な展示会における情報の散逸や，高額取引における支払い不履行リスクは，個人の持続可能な創作活動を阻害する要因となっている．

本研究では，これらの課題を解決するため，作品のナラティブと経済的価値を統合的に管理・流通させる新たなCtoCプラットフォームを設計・開発した．本システムは，主体としてのクリエイター（User），ナラティブを持つ作品（Item），および文脈を共有する共同体（Project）の3つのリソースを有機的に結合するデータモデルを採用している．
技術的な貢献として，第一に，Projectリソースに対して「協力型」「興行型」「テーマ型」という3つのガバナンスモードを実装し，多様なコミュニティ形態（サークル活動から大規模コンテストまで）を単一システム上で再現可能とした．第二に，一点物や希少在庫の配分を最適化するため，自動入札方式やPay-as-Bid方式を含む4つの販売アルゴリズムを実装した．これらは決済基盤であるStripe Connectと高度に連携し，クレジットカードの事前与信（Authorization）を活用することで，CtoC取引における未払いリスクを低減している．

さらに，多数のユーザー相互作用を必要とする本システムの評価手法として，大規模言語モデルを用いた疑似ユーザーデータの生成およびシミュレーション手法を提案した．開発初期段階において，多様な選好を持つペルソナをLLMによって再現し，複雑な経済圏の挙動を検証することで，システムの実用性とロジックの整合性を確認した．本研究は，工学的アプローチにより信頼性の高い取引基盤を構築し，クリエイターエコノミーのさらなる発展に寄与するものである．


\section{背景}

\subsection{クリエイターエコノミーの拡大と「作品」流通の変容}
近年，インターネット技術の発展とソーシャルネットワーキングサービス（SNS）の普及により，個人が自身の創作物を発信・販売し，収益を得る「クリエイターエコノミー」が急速に拡大している．動画投稿，ライブ配信，ハンドメイド作品の販売，デジタルコンテンツの提供など，その形態は多岐にわたり，従来は企業や専門家が独占していた「生産・流通・販売」のプロセスが個人レベルまで民主化された．

特に，物理的な創作物（フィギュア，模型，手芸作品，絵画など）を制作するクリエイターにとって，Mercari，minne，BASEといったCtoC（Consumer to Consumer）プラットフォームや，BOOTHのような同人誌・グッズ販売サービスの登場は，販路開拓のハードルを劇的に引き下げた．これにより，趣味の延長線上で制作を行っていた個人が，容易に「売り手」として市場に参加できる環境が整った．

しかし，これらの既存プラットフォームの多くは，「既製品」や「大量生産品」，あるいは「不用品」の流通に最適化されて設計されている側面が強い．AmazonやMercariに代表されるECサイトのUI/UXは，商品のスペック，価格，状態（新品・中古）を効率的に比較し，迅速に決済・配送することに主眼が置かれている．そこでは，商品自体は代替可能な「モノ（Goods）」として扱われ，その背後にある制作者の思想，制作過程の試行錯誤，作品が生まれた文脈といった「ナラティブ（Narrative）」は，商品説明欄の補助的なテキスト情報として扱われるに留まる．

「一点もの」や極めて少数の生産数しか持たない創作物（作品）において，その価値の源泉は物理的な素材や機能性よりも，このナラティブにこそ存在する．既存のプラットフォームでは，こうした作品固有の物語性や文脈を十分に表現・保存することが難しく，結果として作品が単なる「商品」として消費され，制作者のブランディングや持続的なファンコミュニティの形成に繋がりにくいという課題がある．

\subsection{物理的な展示・即売会における制約とアーカイブの欠如}
デジタルプラットフォームの対極として，学園祭，展示会，即売会（コミックマーケットやワンダーフェスティバル等）といった物理的な場での作品発表も依然として重要な役割を果たしている．これらの場は，制作者と鑑賞者（購入者）が直接交流し，作品の熱量を共有できる貴重な機会である．

しかし，物理的なイベントには「一過性」という避けられない制約が存在する．
第一に，展示情報のアーカイブ化の問題である．展示会のために制作された解説パネルやキャプションボードは，イベント終了とともに廃棄または散逸することが多く，そこに記された詳細な作品情報はデジタル空間に蓄積されない．結果として，イベントに参加できなかった潜在的なファンには作品の魅力が届かず，制作者のポートフォリオとしても十分に機能しない場合が多い．

第二に，金銭授受と販売機会の損失である．学園祭や小規模な展示会では，販売機能を持たず「展示のみ」とするケースや，販売する場合でも現金取引のみの対応となるケースが多い．また，展示されている作品そのものを購入したいという需要があっても，会期終了後の引き渡し手続きや配送手配の煩雑さから，その場での成約に至らないことも頻繁に発生する．このように，物理的な展示空間とデジタル上の決済・物流システムが分断されていることにより，多くの経済的機会が損失しているのが現状である．

\subsection{一点もの取引における価格決定と信頼性の課題}
一点もの，あるいは極めて供給量の少ない作品（ガレージキットの限定生産品など）の流通においては，「価格決定メカニズム」と「取引の信頼性」に関して特有の課題が存在する．

まず，価格決定においては，需要が供給を大幅に上回る場合，定価販売（Fixed Price）形式では「早い者勝ち」となり，転売目的の購入や，botによる自動購入などの問題を引き起こしやすい．これに対し，オークション形式は需要に応じた適正価格を発見する有効な手段であるが，既存のオークションサイト（Yahoo!オークション等）は，前述の通り「不用品処分」の文脈が強く，クリエイターが自身の「作品」を発表・販売する場としてのブランディング機能に欠ける場合がある．

\subsection{共同体による創作活動と収益分配の複雑性}
創作活動は必ずしも個人だけで完結するものではない．サークル活動，合同誌，アンソロジー企画，YouTuber同士のコラボレーションなど，複数のクリエイターが関与する「プロジェクト（Project）」単位での活動も一般的である．
しかし，既存のCtoCプラットフォームの多くは「一人の売り手」対「一人の買い手」という単純な取引モデルを前提としている．そのため，一つの作品（またはイベント）から得られた収益を，関与した複数のメンバーに分配する場合，代表者が一度全額を受け取り，その後銀行振込などで個別に再分配するという，極めてアナログで煩雑な事務作業が必要となる．これは，企画主催者の負担を増大させ，継続的な共同制作活動を阻害する要因となっている．

\subsection{本研究のアプローチ}
以上の背景を踏まえると，個人の創作活動を持続可能なものにするためには，単に「モノを売る」機能を提供するだけでなく，作品の「ナラティブ」をデジタル上で永続的に保存し，適切な「価格決定メカニズム」と「信頼担保」を提供し，さらに「共同体」としての活動をシステム的に支援できる，新たなプラットフォームが必要不可欠であると言える．
本研究では，これらの課題を解決するシステムを設計・開発するとともに，開発初期段階において大規模なユーザーテストが困難であるというシステム開発特有の問題に対し，大規模言語モデル（LLM）を用いた疑似ユーザー（ペルソナ）データの生成とシミュレーションによる評価手法を試みるものである．
\section{先行研究}
決まってない．LLMで疑似データ生成する研究を調べて書く．


\section{目的}
本研究の目的は，クリエイターのエコシステムを支援する新たなプラットフォームの開発と，その開発プロセスにおける生成AI（LLM）の工学的応用の2点に集約される．
\subsection{一点物作品のナラティブを保存し，適切な経済的評価を実現するプラットフォームの開発}
第一の目的は，既存のEコマースやSNSでは両立が困難であった「作品の文脈（ナラティブ）の保存」と「公正な経済的価値の分配」を統合した，新たなCtoCプラットフォームを構築することである．
大量生産品とは異なり，個人の創作物には制作過程や作家の思想といった固有の物語が存在する．本研究では，作品情報にリッチテキスト（Markdown）を用いた記述を必須化し，これを「Project」という共同体の単位で管理することで，作品を単なる消費財としてではなく，文脈を持った文化資産として流通させる仕組みを実現する．
また，一点物や希少在庫の取引において頻発する「価格決定の不透明さ」や「転売」，「未払いトラブル」といった課題に対し，イングリッシュ・オークションやPay-as-Bid方式といった販売アルゴリズムと，決済システム（Stripe）による厳格な与信管理を実装することで，クリエイターとファンの双方にとって公正で安全な取引環境を提供することを目的とする．
\subsection{LLMを用いた疑似ユーザーデータ生成による，CtoCプラットフォームの評価手法の確立}
第二の目的は，多数のユーザー相互作用を必要とするCtoCサービスの開発において，大規模言語モデルを活用した新たな評価手法を提案・検証することである．
オークションや共同企画（Project）における収益分配といった複雑な経済システムを検証するためには，多様な選好や行動原理を持つ多数のユーザーによる試験稼働が不可欠である．しかし，開発初期段階において大規模な被験者を集めることはコスト的に困難であり，単一的なダミーデータでは「競争」や「共創」といった創発的な挙動を再現できない．
そこで本研究では，LLMを用いて多様な性格や背景を持つ「疑似ユーザー，疑似作品」を生成し，それに基づいた作品データや入札行動をシミュレーションすることで，実社会へのデプロイ前にシステムの経済的整合性とユーザー体験（UX）を検証することを目的とする．

\section{Webシステム概要}
本章では，前章で述べた目的を達成するために開発したプラットフォームの設計および実装について詳述する．本システムは，クリエイター（User），作品（Item），そして共同体（Project）の3つの主要リソースを用いて，ナラティブの保存と円滑な経済活動を両立させることを主眼としている．

\subsection{システム全体の概要}
本システムの全体アーキテクチャは，拡張性と保守性を最大化するために，ユーザーインターフェース（Frontend），ビジネスロジック（Backend），データ永続化層（Database），および外部決済基盤（Infrastructure）の4層からなる疎結合な分散システムとして設計した（図4-1参照）．
各層は明確に役割分担されており，APIおよび型定義（Type Definition）を通じて連携することで，開発の並行性とシステムの堅牢性を担保している．以下に各サブシステムの詳細を述べる．

\subsubsection{フロントエンド}
ユーザーとの接点となるフロントエンドには，Reactベースのフレームワークである Next.js (App Router) を採用した．本システムでは，単なる画面描画だけでなく，サーバーサイドでのデータフェッチや認証セッション管理を行うBFF (Backend for Frontend) としての役割も担わせている．

\paragraph{ディレクトリベース・ルーティングの採用}
ソースコード構成（src/app配下）において，ファイルシステムの階層構造をそのままURLパスにマッピングするディレクトリベース・ルーティングを採用した．
例えば，クリエイターのポートフォリオページは src/app/[userPubId]/page.tsx，作品詳細ページは src/app/[userPubId]/[itemPubId]/page.tsx として配置されている．このように動的パラメータをディレクトリ名に含めることで，https://domain.com/user123/item456 のような，直感的で可読性の高いURL構造を容易に実現している．

\paragraph{Server Actionsとデータ取得の最適化}
コンポーネント設計においては，React Server Components (RSC) を全面的に採用した．作品情報（Markdownテキスト）やユーザープロファイルなどの静的な初期データは，サーバーサイドでデータベース（またはバックエンドAPI）から直接取得し，HTMLとしてクライアントに送信される．
また，フォーム送信や入札アクションなどの動的な操作には Server Actions (src/actions/) を用いることで，クライアントサイドに露出するAPIエンドポイントを隠蔽しつつ，型安全な関数呼び出しとしてバックエンドとの通信を実装している．

\paragraph{ 認証と認可}
認証基盤には Node.jsのライブラリであるNextAuth.js (src/api/auth/[...nextauth]) を導入し，Google OAuthおよびメールアドレス認証（Credential）によるセキュアなログインフローを構築した．セッション情報はJWT（JSON Web Token）として暗号化され，HTTP Only Cookieを用いて管理される．

\subsubsection{バックエンド}
システムのコアロジックを担当するバックエンドには，Node.jsフレームワークである NestJS を採用した．このフレームワークは、複雑なCtoC取引のステート管理や，金銭に関わる厳密なバリデーションを行うため，TypeScriptによる静的型付けと，依存性の注入（DI: Dependency Injection）によるモジュラーアーキテクチャを徹底している．

\paragraph{モジュール分割による関心の分離}
アプリケーションは機能単位でモジュール（Module）に分割されている．
\begin{description}
    \item[User Module] アカウント管理，プロフィール更新
    \item[Auth Module] 認証処理
    \item[Item Module] 作品のCRUD，Markdown解析，在庫管理
    \item[Order Module] 注文作成，決済ステータスの遷移管理
    \item[Project Module] 企画のガバナンス管理，収益分配計算
\end{description}
このようにドメインごとに責務を分離することで，コードの可読性を高めるとともに，特定の機能（例：オークション処理）に変更が生じた際の影響範囲を最小限に抑えている．

\paragraph{非同期イベント処理}
本システムでは決済処理をStripeに委譲しているため，決済の成功・失敗や，オークションにおける与信枠の確保（Authorization）の結果は，すべて非同期のWebhookイベントとして通知される．
これを受け取るための専用のエンドポイント (src/webhook) を実装し，Stripeからの署名検証を行った上で，Order データベースのステータスを安全に更新する仕組みを構築した．これにより，ネットワーク遅延や一時的な障害が発生しても，最終的なデータの整合性（Eventual Consistency）が保証される．

\subsubsection{データベース}
データの永続化には，リレーショナルデータベースである PostgreSQL を採用した．複雑な多対多のリレーション（例：ProjectとCollaborators，ItemとBids）を矛盾なく管理し，ACID特性（原子性，一貫性，独立性，永続性）を備えたトランザクション処理を実現するためである．

\paragraph{Prisma ORMによる型安全なデータアクセス}
アプリケーション層とデータベース層の架け橋（ORM）として Prisma を使用している．schema.prisma ファイルに定義されたデータモデルに基づき，型定義ファイル（TypeScript型）が自動生成される．
これにより，バックエンドの開発において「存在しないカラムへのアクセス」や「型の不一致」といった単純なミスをコンパイル時に検出可能となり，開発効率と品質が大幅に向上した．

\paragraph{スキーマ駆動開発}
開発フローにおいては，まず schema.prisma でデータ構造（User, Item, Project等のモデル定義）を記述し，それを元にマイグレーション（prisma migrate）を実行してDBスキーマを更新する手法をとった．これにより，仕様書に定義されたデータモデルが，実装コードとデータベースの実体に乖離することなく，常に同期された状態を維持している．

\subsubsection{決済および送金基盤 (Stripe Connect)}
CtoCプラットフォームにおける金銭取引の要となる決済インフラには，Stripe Connect を採用した．本システムでは単なる決済代行だけでなく，売り手（クリエイター）への送金管理，本人確認（KYC），および複雑なオークション決済を実現するために，以下の高度な機能群を実装している．

\paragraph{連結アカウント (Connected Accounts) によるユーザー管理}
プラットフォームに参加するクリエイター（売り手）は，Stripeの「連結アカウント」として管理される．User モデルの stripeAccountId カラムには，Stripe側で発行された一意のアカウントID（acct\_...）が保存される．
これにより，売上の入金先銀行口座の管理や，特定商取引法に基づく本人確認手続き（KYC: Know Your Customer）といったセンシティブな業務をStripeの堅牢なインフラにオフロードしつつ，プラットフォームとしてのコンプライアンス遵守を実現している．

\paragraph{支払いと送金の分離 (Separate Charges and Transfers)}
資金フローにおいては，買い手からの支払いを即時に売り手へ送金するのではなく，「支払いと送金別方式（Separate Charges and Transfers）」を採用した．
この方式では，買い手の決済（Charge）は一度プラットフォームのアカウントに対して行われ，その後，任意のタイミングで売り手の連結アカウントへ送金（Transfer）が実行される．これにより，以下の要件を満たしている．
\begin{description}
    \item[エスクロー機能] 商品の発送完了や受け取り評価が行われるまで，プラットフォーム上で売上を一時的に保持し，トラブル時の返金を容易にする．
    \item[収益分配の柔軟性] プロジェクト主催者への手数料（Organizer Fee）やプラットフォーム手数料を差し引いた上で，正確な金額をクリエイターに分配する．
\end{description}

\paragraph{オークションにおける与信枠の活用}
イングリッシュオークションや抽選販売において，最大の課題である「当選後の未払い」を防ぐため，クレジットカードの「オーソリゼーション（Authorization）」機能を活用した決済フローを構築した．
\begin{description}
    \item[与信枠確保 (Auth)]  入札や抽選応募の時点で，PaymentIntent を作成し，capture\_method: 'manual' オプションを用いてカードの与信枠のみを確保する．この段階では実際の請求は発生しない．
    \item[確定と解放 (Capture \& Void)]落札や当選が確定した時点で capture を実行し，売上を確定させる．一方，落選や高値更新（Outbid）が発生した場合は即座に cancel を実行し，与信枠を解放する．
\end{description}
この仕組みにより，ユーザーの資金拘束を必要最小限に抑えつつ，システム側は「支払い能力のある入札」のみを受け付けることが可能となり，取引の安全性を飛躍的に高めている．

\subsection{データモデル設計}
本システムのデータモデルは，User，Item，Project の3つのコアエンティティを中心に設計されている．主要なエンティティの関係性をfigure 1に示す．

\begin{figure}[t]
  \begin{center}
    \includegraphics[width=0.95\hsize]{./figure/User-Item-Project.drawio.png}
    \caption{User, Item, Project ER図}
    \label{fig:tmu_hino}
  \end{center}
\end{figure}

\subsubsection{Userモデル}
User モデルは，本プラットフォームにおけるすべての活動の基点となる「主体」を表すリソースである．単なる認証用のアカウント情報（Credential）とは異なり，インターネット上におけるクリエイターとしてのアイデンティティと，経済活動を行うための法的人格（Seller）としての側面を併せ持つ．

\paragraph{公開識別子とポートフォリオ機能}
各ユーザーには，データベース内部の主キー（id）とは別に，外部公開用の識別子として publicId（CUID: Collision Resistant Unique Identifier）が付与される．これにより，https://domain/[userPubId] という予測不可能な固有URLが生成される．このURLは，ユーザーの出品作品（Items）や参加プロジェクト（Projects），活動履歴（Timeline）を集約したポートフォリオページとして機能し，クリエイターのブランディングを支援する．

\paragraph{経済的主体としての属性}
CtoC取引における売り手としての機能を果たすため，Stripe ConnectのアカウントIDを stripeAccountId カラムに保持する．これは，本人確認（KYC）が完了したユーザーにのみ発行されるIDであり，このフィールドの有無によって，システムはユーザーが「出品可能（Seller）」か「購入専用（Buyer）」かを判別する．また，買い手としての情報は stripeCustomerId に紐づけられ，クレジットカード情報等の機微な決済情報はすべてStripe側のVaultに保存される設計としている．

\paragraph{多層的なリレーション}
Userは他のリソースと多層的な関係を持つ．自身が作成した作品（items）だけでなく，他者と共同制作した作品（contributingItems）や，主催する企画（ownedProjects），参加者として関わる企画（contributingProjects）へのリレーションを保持し，個人の活動の広がりをグラフ構造として表現する．

\subsubsection{Itemモデル}
Item モデルは，取引の対象となる「作品」を管理するリソースである．既存のECサイトにおける「商品（Product）」モデルと決定的に異なる点は，物理的なスペック情報よりも「ナラティブ（物語性）」の記述と保存に重きを置いている点である．

\paragraph{ナラティブの保存}
作品の背景ストーリーや制作過程を記録するために，description フィールドにはMarkdown形式のテキストデータが保存される．フロントエンド側ではこれがリッチテキストとしてレンダリングされ，画像や動画の埋め込みとともに，作品単体で完結した「記事」として表示される．これにより，物理的な展示会場においてQRコード経由でアクセスされた際，鑑賞者に深い理解を促すキャプションボードとしての役割を果たす．

\paragraph{販売ロジックの抽象化}
一点物や限定品など，作品の性質に応じた最適な販売形態を選択可能にするため，salesMethod カラム（ENUM型）を定義している．
\begin{description}
    \item[AUCTION] イングリッシュオークション形式．currentPrice や endTime と連動し，入札（Bid）を受け付ける．
    \item[LOTTERY] 抽選販売形式．事前与信（Pre-Auth）を用いた応募ロジックが適用される．
    \item[FIXED\_PRICE] 定額販売形式．即時購入が可能となる．
\end{description}

\paragraph{ステータス管理}
作品のライフサイクルを管理するために，status カラム（ENUM型）を用いる．出品前の DRAFT，販売中の FOR\_SALE，取引成立後の SOLD などの状態遷移を厳密に定義することで，不正な購入や二重決済を防ぐ排他制御を実現している．また，Stripeの商品マスタと同期するために stripeProductId および stripePriceId を保持し，決済システムとの整合性を保っている．

\subsubsection{Projectモデル}
Project モデルは，複数の User と Item を束ねる「共同体」および「文脈」を提供するリソースである．これは単なるカテゴリ分類タグではなく，独自の経済圏（Micro-Economy）を持つ「企画」そのものをデジタル上に実体化させたものである．

\paragraph{ガバナンス構造の表現}
\begin{description}
    \item[Owner] プロジェクトの作成者であり，管理者権限を持つ．ownerId 外部キーによってUserモデルと一対多で結ばれる．
    \item[Collaborators] 企画に参加するクリエイター群．中間テーブルを介した多対多（Many-to-Many）のリレーションによって定義される．
この構造により，招待制のサークル活動（Cooperative Mode）や，主催者が権限を持つコンテスト（Managed Mode）など，多様な組織形態をシステム上で再現可能にしている．
\end{description}

\paragraph{経済圏としての機能}
Projectは，紐づけられた作品群（items）の集合体として機能する．Item モデルは projectId を外部キーとして持ち，自身がどの文脈（企画）に属しているかを示す．このリレーションに基づき，システムは「企画単位での売上集計」や「主催者への手数料（Organizer Fee）分配」といった高度な金銭処理を実行する．すなわち，Projectモデルは単なるグルーピング機能ではなく，収益分配の計算単位（Accounting Unit）としても機能する設計となっている．

\subsection{Project管理方式}
本プラットフォームにおける Project は，単なる商品カテゴリや検索タグではなく，独自の規律と経済ルールを持つ「共同体」として定義される．
現実世界の創作活動には，大学のサークル活動のような水平的な人間関係に基づくものから，コンテストのように主催者が強い権限を持つ垂直的な構造，あるいはインターネット上のミームのように不特定多数が自律的に参加するものまで，多種多様な形態が存在する．
これらを単一のシステム仕様でカバーすることは困難であるため，本システムでは Project リソースに対して3つの異なるガバナンスモード（管理方式）を実装した．

\subsubsection{Cooperative Mode(協力型 / 招待制)}
\paragraph{意義と適用領域}
Cooperative Mode は，既知のメンバー間の「信頼（Trust）」を基盤とした小規模から中規模の共同体を再現するためのモードである．大学のサークル活動，グループ展，あるいは特定のクリエイター同士のコラボレーション企画などを想定している．ここでは，厳格な管理コストを削減し，メンバー間の自律的な調整を優先する「性善説」に基づいた運用がなされる．


\paragraph{仕様詳細}
\begin{description}
    \item[参加権限] 「招待制 (Invitation Only)」を採用する．プロジェクトオーナーまたは既存メンバーからの招待リンク（署名付きURL）を受け取ったユーザーのみが，Collaboratorとして参加できる．
    \item[作品管理] 参加メンバーは，自身の判断で作品（Item）をProjectに紐づけ，即座に公開することができる．オーナーによる事前承認プロセスは存在しない．
    \item[収益構造] 原則として，売上は各作品の制作者（Seller）に直接帰属する．オーナーによる「場所代（Organizer Fee）」の強制徴収機能は無効化されており，金銭的な搾取が発生しない構造となる。
\end{description}

\subsubsection{Managed Mode (興行型 / 管理制)}
\paragraph{意義と適用領域}
Managed Mode は，明確な主催者（Organizer）が存在し，品質管理やレギュレーションの遵守が求められる階層型の共同体である．企業主催のコンテスト，有名インフルエンサーによる企画展，アンソロジーの編纂などを想定している．
このモードの核心は，主催者に対して「管理権限」と引き換えに「経済的インセンティブ」を与える点にある．これにより，従来はボランティアに依存していた企画運営業務（キュレーション，広報，進行管理）を，収益を生む事業として成立させることを可能にする．

\paragraph{仕様詳細}
\begin{description}
    \item[参加権限] 「公募制 (Application)」を採用する．ユーザーはProjectに対して参加申請を行い，オーナーが管理画面でこれを「承認 (Approve)」または「拒否 (Reject)」することでメンバーシップが確定する．
    \item[作品管理] 出品された作品は一時的に PENDING ステータスとなり，オーナーが内容を確認し承認するまで公開されない．また，オーナーは規約違反の作品を強制的にプロジェクトから除外する権限を持つ．
    \item[収益構造] Stripe Connectの "Separate Charges and Transfers" APIを活用し，「主催者手数料 (Organizer Fee)」 の設定を可能にしている．取引成立時，システムは売上総額からプラットフォーム手数料と主催者手数料を自動的に控除し，残額を作品制作者へ送金する．
\end{description}

\subsubsection{Theme Mode (テーマ型 / 自由参加)}
\paragraph{意義と適用領域}
Theme Mode は，中央集権的な管理者を排し，共通の文脈（Context）やテーマの下に不特定多数の主体が自律的に集合する「創発的な共同体」である．インターネット上で突発的に発生するトレンドや，特定のハッシュタグを介して形成される大規模な社会現象，あるいは季節的なイベントに伴う集合知的な制作活動をモデル化している．
本モードの設計目的は，参加における許認可プロセスを完全に撤廃することで参入障壁を最小化し，ネットワーク外部性を最大限に作用させることにある．これにより，短期間で幾何級数的な作品数の増加とトラフィックの凝集を実現する．

\paragraph{仕様詳細}
\begin{description}
    \item[参加権限] 「自由参加 (Open)」を採用する．アカウントを持つ全ユーザーは，許可を得ることなく即座にProjectに参加できる．
    \item[作品管理] 紐づけられた作品は即時公開される．オーナー（発起人）は，通報対応を除き，他者の作品を削除する権限を持たない．
    \item[収益構造] 主催者手数料の設定は不可である．売上はすべて作品制作者に還元される．これにより，発起人が「他人の作品で金儲けをしている」という批判を避けることができ，純粋なムーブメントとしての成長を促進する．
\end{description}

\subsubsection{Project 管理方式の比較}
各モードにおける権限と金銭的フローの差異を示す。
\begin{table}[h]
  \caption{インダストリアルアートの授業}
  \label{tab:sample}
  \centering
  \begin{tabular}{lccccc} % l:Left, c:Center, r:Right 寄せ
    \hline
    方式名 & 参加フロー & 作品公開フロー & 主催者権限 & 収益分配(Organizer Fee) \\
    \hline \hline
    Cooperative  & 招待のみ   & 即時公開 & メンバー除名可 & 不可 \\
    Managed  & 申請 $\to$ 承認 & 投稿 $\to$ 承認 & 作品削除・否認可 & 可 \\
    Theme & 自由参加 & 即時公開 & 管理不可 & 不可 \\
    \hline
  \end{tabular}
\end{table}

\subsection{統合型検索システム}
本プラットフォームにおける検索機能は，単に特定の物品を発見するためのツールではなく，ユーザーを未知の作品やクリエイター，あるいはコミュニティへと導く「ディスカバリー（発見）」の中核機能として位置づけられる．
ユーザーの探索意図は，「特定の作品が欲しい（Transactional Query）」だけでなく，「面白い企画はないか（Exploratory Query）」や「特定の作家の活動を知りたい（Navigational Query）」など多岐にわたる．これら多様な検索意図を単一のインターフェースで充足させるため，User，Item，Project の3つの主要リソースを横断的に検索する「統合型オムニサーチシステム」を実装した．

\subsubsection{設計思想: 探索的検索への対応}
従来のEコマースサイトにおける検索システムは，SKU（最小管理単位）ベースの商品検索に特化しており，ユーザーが明確な購買目的を持っていることを前提とすることが多い．
しかし，一点物や創作活動を扱う本プラットフォームにおいては，ユーザーは必ずしも具体的な商品名を検索するとは限らない．「折り紙」「ガレージキット」といったジャンル名や，「学園祭」といったイベント名から検索を開始し，そこから関連するクリエイターや作品群へと興味を広げていく「探索的検索」の行動様式が支配的である．
したがって，検索システムは，単一のリソースリストを返すのではなく，システム内の多様なエンティティ（主体，文脈，作品）を網羅的に提示し，ユーザーの回遊を促す情報アーキテクチャを持つ必要がある．

\subsubsection{アーキテクチャ: 並列クエリ実行モデル}
オムニサーチのバックエンド処理においては，異なるデータ構造を持つ複数のテーブルに対する検索を効率的に処理するため，並列クエリ実行モデル（Parallel Query Execution Model）を採用した．
具体的には，ユーザーが入力した単一の検索クエリに対し，バックエンド（NestJS）は以下の処理を非同期かつ並列に実行する．
\begin{description}
    \item[Project Search] プロジェクト名および概要文に対する全文検索またはベクトル検索．
    \item[User Search] ユーザー名およびプロフィール文に対する検索．
    \item[Item Search] 作品名，説明文（Markdown），タグに対する検索．
\end{description}
これらのクエリは Promise.all 等を用いて並行してデータベース（PostgreSQL）に発行され，個別の検索結果が得られ次第，単一のレスポンスオブジェクト（Aggregated Response）に統合されてクライアントへ返却される．これにより，リソースごとに個別の検索画面を遷移する必要をなくし，シームレスな検索体験を実現している．

\subsubsection{インターフェース: 階層的情報の統合表示}
検索結果の表示画面においては，情報の重要度とユーザーの認知負荷を考慮し，リソースタイプごとに優先順位を設けた階層的表示を採用した．
\begin{description}
    \item[上部: 関連プロジェクト] 検索結果の最上部には，クエリに関連性の高い Project を最大3件表示する．これは，個別の作品よりも「企画」や「イベント」という大きな文脈を優先して提示することで，ユーザーをコミュニティ全体へと誘導するためである．
    \item[中部: 関連クリエイター] 次に，関連する User を最大5件表示する．これにより，特定の作家を探しているユーザーのナビゲーション意図に即座に応える．
    \item[下部: 関連作品] 最下部には，関連する Item をグリッド形式で表示する．ここでは無限スクロールを採用し，ユーザーが満足するまで作品を閲覧し続けられるよう設計している．
\end{description}
また，検索結果画面のサイドバーには，「ファセットナビゲーション（Faceted Navigation）」を配置した．ユーザーは，統合検索によって得られた広範な結果から，価格帯，カテゴリ，販売方式（オークション・定額など）といった属性に基づいて動的に絞り込み（Filtering）を行うことができる．これにより，探索的な「広げる検索」と，条件を特定する「絞る検索」の両立を図っている．

\subsection{販売形態と価格決定アルゴリズム}
本プラットフォームが扱う「一点物」や「希少在庫」の流通において，固定価格での販売は必ずしも最適解ではない．需要が供給を大幅に上回る場合，価格メカニズムが機能せず「早い者勝ち」となることで，適正価格の販売ではなくなるからである．
この課題を解決し，作品を最も必要とするユーザーへ適正価格で配分するために，本システムでは以下の4つの販売アルゴリズムを実装した．また，全ての方式において，Stripe Connect APIを用いたクレジットカードの与信枠確保（Authorization）を必須とすることで，CtoC取引における最大の問題である支払い不履行を低減している。

\subsubsection{イングリッシュ・オークション}
在庫が単一（$N=1$）である一点物の作品に対し，最も高い評価額を持つ購入希望者を決定するための標準的な競り上げ方式である．

\paragraph{自動入札アルゴリズム}
ユーザーの利便性とサーバー負荷の軽減を考慮し，Vickrey Auctionの概念を取り入れた自動入札システムを採用した．
ユーザーは「現在価格」ではなく，自身の「支払ってもよい最高額（Maximum Bid）」を入力する．システムは，2番目に高い入札額（または開始価格）に最小入札単位（Increment）を加えた額を「現在価格」として自動的に算出・更新する．これにより，ユーザーは画面に張り付いて再入札を繰り返す必要がなくなり，合理的な入札行動が促進される．

\paragraph{連続的な与信枠管理フロー}
本システムでは，「最高入札者（Leader）は常に支払い能力を保証されている」という状態を維持するため，最高入札者が入れ替わるたびに決済リソースの「ハンドオーバー」を行う．具体的なトランザクションフローは以下の通りである．
\begin{description}
    \item[1. 新規与信] 新たな高値入札者が現れた際，システムはそのユーザーのクレジットカードに対し，入札額全額の与信枠確保（paymentIntents.create with capture\_method: 'manual'）を試行する．これに失敗した場合，入札自体を却下する．
    \item[2. DB更新] 与信確保に成功した場合のみ，データベース上の Item レコード（現在価格，リーダーID）および Bid レコードを更新する．
    \item[3. 旧与信解放] 更新完了後，直前の最高入札者の与信枠（PaymentIntent）に対してキャンセル処理（paymentIntents.cancel）を非同期的に実行し，枠を即時解放する．
\end{description}
このプロセスにより，オークション終了時に「落札者が支払えない」というリスクを回避している。

\subsubsection{複数点式オークション}
在庫が複数（$N > 1$）存在するが，需要がそれを上回る場合（例：限定5個のガレージキット）に適用される，本システム独自の販売方式である．従来の単一価格オークション（Uniform Price Auction）ではなく，入札額がそのまま支払額となる Pay-as-Bid方式 を採用した．
\paragraph{当選者決定ロジック}
入札額の高い順にソートを行い，上位 $N$ 名を当選者として確定する．
\[
B_{1} \ge B_{2} \ge \dots \ge B_{N} \ge \dots \ge B_{M}
\]
ここで $B_{i}$ は $i$ 番目のユーザーの入札額であり，上位 $N$ 名までの入札が有効となる．同額入札が存在する場合は，先着優先として順位付けを行う．
\paragraph{Pay-as-Bidによる収益最大化}
当選者全員が $B_{N}$（ボーダーライン価格）を支払う単一価格方式ではなく，各当選者が自身の提示した $B_{i}$ を支払う Pay-as-Bid 方式を採用した．
これにより，作品に対し強い選好を持つ熱狂的なファン（$B_{1}$）からは高い収益を，学生などの価格に敏感な層（$B_{N}$）からは適正な収益を得ることが可能となる．結果として，同一の商品であっても購入者の「支払意思額（Willingness to Pay）」に応じた価格差別化が自然発生し，クリエイターへの還元額（Consumer Surplusの吸収）を最大化する．
\paragraph{取引および決済フローの詳細}
本方式では，複数の当選候補者が並存するため，イングリッシュ・オークションのような「入れ替え（Swap）」ではなく「全件確保（Hold）」に近い戦略をとる．
\begin{description}
    \item[Step 1: 入札と与信確保 ] ユーザーが入札を行う際，システムは即座に入札額全額の与信枠確保（Authorization）を実行する．この時点で決済は確定しないが，カードの利用枠は押さえられる．これにより，冷やかしや入札後の支払い拒否を未然に防ぐ．
    \item[Step 2: ボーダーラインの可視化と競争] オークション期間中，入札画面には「現在，上位 $N$ 位に入るための最低価格（$B_{N}$）」がリアルタイムで表示される．ユーザーはこのボーダーラインを参考に，自身の予算内で入札額を調整する．
    \item[Step 3: 決着と一括決済] 決着と一括決済 (Settlement)終了時刻（endTime）に到達した時点で，システムは全入札を確定させる．
    上位 $N$ 名: 確保していた与信枠に対し capture を実行し，売上を確定させる．
    落選者 ($N+1$ 位以下): 確保していた与信枠に対し cancel (Void) を実行し，即座に解放する．
\end{description}
\subsubsection{抽選販売}
価格の高騰を抑制したい場合や，機会の平等を重視する場合に用いられる方式である．技術的な特異点は，応募プロセスにおける事前与信（Pre-Authorization）の導入にある．
\paragraph{フローとステート管理}
\begin{description}
    \item[応募時] ユーザーが「応募」ボタンを押下した瞬間に，商品価格分の与信枠確保（Auth）を実行する．確保に失敗した場合，応募は受理されない．
    \item[抽選時] 擬似乱数生成器を用いて当選者を選出する．
    \item[確定時] 当選者の取引ステータスを CAPTURED に更新し，決済を確定させる．同時に，落選者に対しては VOID 処理を行い，与信枠を即時解放する．
\end{description}
この仕組みにより，従来のアナログな抽選販売で頻発していた「当選連絡後の音信不通」や「支払い拒否」による再抽選の手間を完全にゼロにし，運用コストを最小化している．

\subsubsection{定額販売}
在庫が無制限，あるいは需給バランスが安定している作品向けの，一般的なECと同様の販売方式である．即時決済（Capture）によって取引が成立する．